{% extends 'base.html' %}
{% block content %}
<div class='container'>

<div class='col-sm-12'>
<h4><a href='{% url 'Books:createchallenge' %}'>Create a challenge </a></h4>
<h4><a href='{% url 'Books:searchbooks' %}'>Search </a></h4>
</div>

<div class='col-md=9' id='booklist'>
{% include 'book/books/list_ajax.html' %}
</div>
</div>
{% endblock %}

{% block domready %}
    var page = 1;
    var empty_page = false;
    var block_request = false;
    
    $(window).scroll(function(){
        var margin = $(document).height() - $(window).height - 200;
        if ($(window).scrollTop() > margin && empty_page == false && block_request == false){
        block_request = true;
        page += 1'
$.get('?page=' + page, function(data){}
    if(data == ''){
empty_page = true;
}else{
    block_request = false;
    $('#booklist').append(data);
}
)
}

})

{% endblock %}